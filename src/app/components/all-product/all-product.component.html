<div class="top_page">
    <div class="container">
        <h1>Experience the Future of Technology with Our Topico.</h1>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Vero ipsum reprehenderit quaerat ullam voluptatem,
            ex ipsam nobis sunt inventore Vero ipsum reprehenderit quaerat ullam voluptatem.
        </p>
    </div>
 </div>

 <section class="all_products">
    <div class="container">
        <span class="btn_filter" onclick="open_close_filter()">Filter <i class="fa-solid fa-filter"></i></span>
        <div class="filter">
            <h2>filter</h2>
            
            <div class="filter_item">
                <h4>Categories</h4>
                <div class="content">
                    <div class="item">
                        <span>Phone</span>
                        <input type="checkbox" name="Phones" (change)="ProductFilter($event)">
                    </div>
                    <div class="item">
                        <span>Tablets</span>
                        <input type="checkbox" name="Tablets" (change)="ProductFilter($event)">
                    </div>
                    <div class="item">
                        <span>Electronics</span>
                        <input type="checkbox" name="Electronics" (change)="ProductFilter($event)">
                    </div>
                    <div class="item">
                        <span>TV</span>
                        <input type="checkbox" name="TV" (change)="ProductFilter($event)">
                    </div>
                    <div class="item">
                        <span>Head Phone</span>
                        <input type="checkbox" name="HeadPhones" (change)="ProductFilter($event)">
                    </div>
                    <div class="item">
                        <span>Watches</span>
                        <input type="checkbox" name="SmartWatch" (change)="ProductFilter($event)">
                    </div>
                </div>
            </div>

            <div class="filter_item">
                <h4>Brand</h4>
                <div class="content">
                    <div class="item">
                        <span>Apple</span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span>Samsung</span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span>Intel</span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span>OPPO</span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span>xiaomi</span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span>huwui</span>
                        <input type="checkbox">
                    </div>
                </div>
            </div>
            <div class="filter_item">
                <h4>color</h4>
                <div class="content">
                    <div class="item">
                        <span class="color" style="background: red;"></span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span class="color" style="background: yellow;"></span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span class="color" style="background: orange;"></span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span class="color" style="background: green;"></span>
                        <input type="checkbox">
                    </div>
                    <div class="item">
                        <span class="color" style="background: purple;"></span>
                        <input type="checkbox">
                    </div>
                </div>
            </div>
        </div>
        @if (filterdProducts.length > 0) {
            <div id="products_dev" class="products_dev">
                <div class="product swiper-slide" *ngFor="let product of filterdProducts">
                    <div class="icons">
                        <span><i (click)="addToCart(product.id,$event)" class="fa-solid fa-cart-plus"  [attr.data-index] = "product.id" #cartBtn></i></span> 
                        <span><i class="fa-solid fa-heart"></i></span> 
                        <span><i class="fa-solid fa-share"></i></span> 
                    </div>
                    <span class="sale_persent" *ngIf="product.old_price">%{{calculateDiscountPercentage(product.old_price! , product.price)}}</span>
                    <div class="img_product">
                        <img [src]="product.img" alt="{{product.name}}">
                        <img [src]="product.img_hover" class="img_hover" alt="">
                    </div>
                    <h3 class="name_product">
                        <a [routerLink]="['/productItemPage']" [queryParams]="{product_id : product.id}" >{{product.name}}</a>
                    </h3>
                    <div class="stars">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                    </div>
                    <div class="price">
                        <p><span>${{product.price}}</span></p>
                        <p class="old_price" *ngIf="product.old_price">${{product.old_price}}</p>
                    </div>
                </div>
            </div>
        } @else {
            <div id="products_dev" class="products_dev">
                <div class="product swiper-slide" *ngFor="let product of allProducts">
                    <div class="icons">
                        <span><i (click)="addToCart(product.id,$event)" class="fa-solid fa-cart-plus" #cartBtn></i></span> 
                        <span><i class="fa-solid fa-heart"></i></span> 
                        <span><i class="fa-solid fa-share"></i></span> 
                    </div>
                    <span class="sale_persent" *ngIf="product.old_price">%{{calculateDiscountPercentage(product.old_price, product.price)}}</span>
                    <div class="img_product">
                        <img [src]="product.img" alt="{{product.name}}">
                        <img [src]="product.img_hover" class="img_hover" alt="">
                    </div>
                    <h3 class="name_product">
                        <a [routerLink]="['/productItemPage']" [queryParams]="{product_id : product.id}" >{{product.name}}</a>
                    </h3>
                    <div class="stars">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                    </div>
                    <div class="price">
                        <p><span>${{product.price}}</span></p>
                        <p class="old_price" *ngIf="product.old_price">${{product.old_price}}</p>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="pagination" *ngIf="flag === false">
        <button (click)="setPage(page! - 1)" [disabled]="page! <= 0"><span class="btn_page_prev"><i class="fa-solid fa-backward-step"></i></span></button> 
        <button (click)="setPage(page = 1)"  class="btn_page"><span class="num_page active">1</span></button>
        <button (click)="setPage(page = 2)"  class="btn_page"><span class="num_page">2</span></button> 
        <button (click)="setPage(page = 3)"  class="btn_page"><span class="num_page">3</span></button> 
        <button (click)="setPage(page! + 1)" [disabled]="(page! + 1) * getSize()! >= getTotalElement()!"><span class="btn_page_prev"><i class="fa-solid fa-forward-step"></i></span></button>
    </div>
 </section>
<router-outlet />